<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Trello Power-Up</title>
</head>
<body>
  <script src="https://p.trellocdn.com/power-up.min.js"></script>
  <script>
    TrelloPowerUp.initialize({
      'card-buttons': function (t, options) {
        return [
          {
            icon: 'https://i.ibb.co/6sbknH0/logo-stroke-32pt-style-2-no-stroke.png',
            text: '▶ Start exeros-api',
            callback: function (t) {
              return Promise.all([
                t.card('id', 'name'),
                t.member('username')
              ]).then(([card, user]) => {
                return fetch('https://n8n.yourdomain.com/webhook/trello-przycisk', {
                  method: 'POST',
                  headers: { 'Content-Type': 'application/json' },
                  body: JSON.stringify({
                    action: 'exeros-api',
                    card,
                    user
                  })
                });
              }).then(() => t.closePopup());
            }
          },
          {
            icon: 'https://i.ibb.co/6sbknH0/logo-stroke-32pt-style-2-no-stroke.png',
            text: '▶ Start exeros-panel',
            callback: function (t) {
              return Promise.all([
                t.card('id', 'name'),
                t.member('username')
              ]).then(([card, user]) => {
                return fetch('https://n8n.yourdomain.com/webhook/trello-przycisk', {
                  method: 'POST',
                  headers: { 'Content-Type': 'application/json' },
                  body: JSON.stringify({
                    action: 'exeros-panel',
                    card,
                    user
                  })
                });
              }).then(() => t.closePopup());
            }
          },
          {
            icon: 'https://i.ibb.co/6sbknH0/logo-stroke-32pt-style-2-no-stroke.png',
            text: '▶ Start exeros-api-caching-proxy',
            callback: function (t) {
              return Promise.all([
                t.card('id', 'name'),
                t.member('username')
              ]).then(([card, user]) => {
                return fetch('https://n8n.yourdomain.com/webhook/trello-przycisk', {
                  method: 'POST',
                  headers: { 'Content-Type': 'application/json' },
                  body: JSON.stringify({
                    action: 'exeros-api-caching-proxy',
                    card,
                    user
                  })
                });
              }).then(() => t.closePopup());
            }
          },
          {
            icon: 'https://i.ibb.co/6sbknH0/logo-stroke-32pt-style-2-no-stroke.png',
            text: '▶ Start exeros-web-companion',
            callback: function (t) {
              return Promise.all([
                t.card('id', 'name'),
                t.member('username')
              ]).then(([card, user]) => {
                return fetch('https://n8n.yourdomain.com/webhook/trello-przycisk', {
                  method: 'POST',
                  headers: { 'Content-Type': 'application/json' },
                  body: JSON.stringify({
                    action: 'exeros-web-companion',
                    card,
                    user
                  })
                });
              }).then(() => t.closePopup());
            }
          }
        ];
      }
    });
  </script>
</body>
</html>
